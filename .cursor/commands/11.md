Tarefa 11: Implementar o Botão de Logout (na Tela de Perfil)
Objetivo: Conectar o botão "Sair" na tela app/(tabs)/perfil.tsx para que ele chame a função signOut do nosso AuthContext.

Contexto: Esta é a peça final que faltava. O AuthContext (Tarefa 09) e o _layout (Tarefa 10) estão prontos, mas o botão que inicia o processo não está configurado.

Modificações no seu app/(tabs)/perfil.tsx
Instruções:

Abra o ficheiro: AplicativoFIber/app/(tabs)/perfil.tsx

Substitua o conteúdo: Substitua o conteúdo inteiro do seu perfil.tsx por este código. (Eu assumi que você quer exibir os dados do utilizador que guardámos no AuthContext e um botão de "Sair").

TypeScript

// Em: app/(tabs)/perfil.tsx
//
// 1. APAGUE todo o conteúdo antigo.
// 2. COLE este novo código.
//
import React from 'react';
import { View, Text, Button, StyleSheet, Alert } from 'react-native';
import { useAuth } from '@/hooks/useAuth'; // Importa o hook de autenticação

export default function PerfilScreen() {

  // 1. Pega o 'user' e a função 'signOut' do nosso Contexto
  const { user, signOut } = useAuth();

  // 2. Cria a função que será chamada pelo botão
  const handleLogout = () => {
    try {
      // Chama a função 'signOut' que corrigimos na Tarefa 09
      signOut(); 
    } catch (error) {
      console.error(error);
      Alert.alert("Erro", "Não foi possível fazer logout.");
    }
  };

  // Se o 'user' ainda não carregou (raro acontecer aqui, mas é uma boa prática)
  if (!user) {
    return <View style={styles.container} />;
  }

  // 3. Renderiza a tela de perfil
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Perfil do Cliente</Text>

      <View style={styles.infoBox}>
        <Text style={styles.label}>Nome:</Text>
        <Text style={styles.info}>{user.nome_cliente}</Text>
      </View>

      <View style={styles.infoBox}>
        <Text style={styles.label}>E-mail:</Text>
        <Text style={styles.info}>{user.email}</Text>
      </View>

      <View style={styles.infoBox}>
        <Text style={styles.label}>ID do Cliente (IXC):</Text>
        <Text style={styles.info}>{user.id_cliente}</Text>
      </View>

      <View style={styles.infoBox}>
        <Text style={styles.label}>Status do Contrato:</Text>
        <Text style={styles.info}>{user.status_contrato}</Text>
      </View>

      {/* 4. O Botão de Sair */}
      <View style={styles.logoutButton}>
        <Button 
          title="Sair (Logout)" 
          onPress={handleLogout} // Chama a nossa função
          color="#FF3B30" // Cor vermelha para "sair"
        />
      </View>
    </View>
  );
}

// Estilos (pode ajustar conforme o seu tema)
const styles = StyleSheet.create({
  container: {
    flex: 1,
    padding: 20,
    backgroundColor: '#fff',
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 20,
  },
  infoBox: {
    marginBottom: 15,
  },
  label: {
    fontSize: 14,
    color: '#666',
  },
  info: {
    fontSize: 18,
  },
  logoutButton: {
    marginTop: 'auto', // Coloca o botão no fim da tela
    marginBottom: 20,
  }
});